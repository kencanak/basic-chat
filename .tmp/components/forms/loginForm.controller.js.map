{"version":3,"sources":["../../../client/components/forms/loginForm.controller.js"],"names":[],"mappings":"AAAA;;;;;;IAEM,mB;AACJ,+BAAY,IAAZ,EAAkB,MAAlB,EAA0B,UAA1B,EAAsC,QAAtC,EAAgD;AAAA;;AAC9C,SAAK,IAAL,GAAY,EAAZ;AACA,SAAK,MAAL,GAAc,EAAd;AACA,SAAK,SAAL,GAAiB,KAAjB;AACA,SAAK,QAAL,GAAgB,QAAhB;;AAEA,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,UAAL,GAAkB,UAAlB;AACD;;;;0BAGK,I,EAAM;AAAA;;AACV,WAAK,SAAL,GAAiB,IAAjB;;AAEA,UAAI,KAAK,MAAT,EAAiB;AACf,aAAK,IAAL,CAAU,KAAV,CAAgB;AACd,oBAAU,KAAK,IAAL,CAAU,QADN;AAEd,oBAAU,KAAK,IAAL,CAAU;AAFN,SAAhB,EAIC,IAJD,CAIM,YAAM;AACV,cAAI,YAAJ;;AAEA,gBAAK,QAAL,CAAc,YAAU;AACpB,iBAAK,UAAL,CAAgB,UAAhB,CAA2B,eAA3B;AACH,WAFD,EAEE,GAFF;;AAIA,gBAAK,MAAL,CAAY,EAAZ,CAAe,UAAf;AACD,SAZD,EAaC,KAbD,CAaO,eAAO;AACZ,kBAAQ,GAAR,CAAY,GAAZ;AACA,gBAAK,MAAL,CAAY,KAAZ,GAAoB,IAAI,OAAxB;AACD,SAhBD;AAiBD;AACF;;;;;;AAGH,QAAQ,MAAR,CAAe,SAAf,EACG,UADH,CACc,qBADd,EACqC,mBADrC","file":"loginForm.controller.js","sourcesContent":["'use strict';\n\nclass LoginFormController {\n  constructor(Auth, $state, $rootScope, $timeout) {\n    this.user = {};\n    this.errors = {};\n    this.submitted = false;\n    this.$timeout = $timeout;\n\n    this.Auth = Auth;\n    this.$state = $state;\n    this.$rootScope = $rootScope;\n  }\n\n\n  login(form) {\n    this.submitted = true;\n\n    if (form.$valid) {\n      this.Auth.login({\n        userName: this.user.userName,\n        password: this.user.password\n      })\n      .then(() => {\n        var self = this;\n        // Logged in, redirect to home\n        this.$timeout(function(){\n            self.$rootScope.$broadcast('authenticated');\n        },100);\n\n        this.$state.go('chatRoom');\n      })\n      .catch(err => {\n        console.log(err);\n        this.errors.other = err.message;\n      });\n    }\n  }\n}\n\nangular.module('chatApp')\n  .controller('LoginFormController', LoginFormController);\n"]}